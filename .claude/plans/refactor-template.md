# リファクタリング計画書テンプレート

## リファクタリング概要

**タイトル**: [リファクタリングの概要]
**優先度**: [High/Medium/Low]
**種類**: [Code Quality/Performance/Architecture/Maintainability]
**見積もり**: [時間/日数]

## 背景・理由

### 現在の問題

[なぜリファクタリングが必要か]

### 期待される効果

- [効果 1: コードの可読性向上]
- [効果 2: パフォーマンス向上]
- [効果 3: 保守性向上]

## 対象範囲

### 対象ファイル

**メインターゲット**:

- `src/path/to/main-file.ts`
- `src/path/to/related-file.tsx`

**影響を受けるファイル**:

- `src/path/to/dependent-file.ts`
- `src/path/to/test-file.test.ts`

### 対象機能

[どの機能・コンポーネントが対象か]

## リファクタリング計画

### Before (現在の状態)

```typescript
// 現在のコード構造
```

### After (理想の状態)

```typescript
// リファクタリング後のコード構造
```

### 変更内容

1. **構造の変更**

   - [変更内容 1]
   - [変更内容 2]

2. **命名の変更**

   - [変更内容 1]
   - [変更内容 2]

3. **ロジックの改善**
   - [変更内容 1]
   - [変更内容 2]

## 実行計画

### Phase 1: 準備

- [ ] 現在のテストが全てパスすることを確認
- [ ] 新しいテストケースの作成（必要に応じて）
- [ ] 依存関係の整理

### Phase 2: リファクタリング実行

- [ ] 小さな変更から開始
- [ ] 各変更後にテストを実行
- [ ] 段階的に大きな変更を適用

### Phase 3: 検証・クリーンアップ

- [ ] 全テストの通過確認
- [ ] 不要なコードの削除
- [ ] ドキュメントの更新

## 安全性の確保

### テスト戦略

- [ ] 既存テストの維持
- [ ] 新しいテストの追加（必要に応じて）
- [ ] 回帰テストの実行

### 段階的実行

- [ ] 一度に大きな変更をしない
- [ ] 各ステップでテストを実行
- [ ] 問題があれば前のステップに戻る

### バックアップ・回復

- [ ] 変更前の状態を記録
- [ ] 問題時の回復手順を用意

## リスク評価

### 技術的リスク

- [リスク 1: 既存機能の破壊]
  - **対策**: [対策内容]
- [リスク 2: パフォーマンス劣化]
  - **対策**: [対策内容]

### プロジェクトリスク

- [リスク 1: 開発時間の延長]
  - **対策**: [対策内容]

## 完了条件

### 機能面

- [ ] 既存の機能が全て動作する
- [ ] 新しい要件が満たされている
- [ ] パフォーマンスが改善している（該当する場合）

### 品質面

- [ ] 全テストがパス
- [ ] linting エラーなし
- [ ] 型エラーなし
- [ ] コードレビューの基準を満たす

### ドキュメント面

- [ ] 関連ドキュメントの更新
- [ ] コメントの更新
- [ ] 変更履歴の記録

## 測定指標

### 定量的指標

- [指標 1: 実行時間の改善]
- [指標 2: コードの行数削減]
- [指標 3: 循環複雑度の改善]

### 定性的指標

- [指標 1: 可読性の向上]
- [指標 2: 保守性の向上]

## 後続作業

### 関連するリファクタリング

- [関連作業 1]
- [関連作業 2]

### 監視・フォローアップ

- [監視項目 1]
- [監視項目 2]

---

**作成日**: [YYYY-MM-DD]
**開始日**: [YYYY-MM-DD]
**完了日**: [YYYY-MM-DD]
**担当者**: [Claude Code]
